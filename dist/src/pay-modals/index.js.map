{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/pay-modals/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, css, PropertyValues } from \"lit\";\nimport { customElement, state, query, property } from \"lit/decorators.js\";\nimport { UseApi } from \"../hooks/use-api.js\";\nimport { UseExchangeRate } from \"../hooks/useExchangeRate.js\";\nimport { cryptoPayStyles } from \"./crypto-pay.styles.js\";\nimport \"../components/app-loader.js\";\nimport \"../components/close-button.js\";\nimport { UseExpire } from \"../hooks/use-expire.js\";\nimport { UseGetTransactionById } from \"../hooks/use-gettransactionbyid.js\";\nimport \"../components/wifi-loader.js\";\nconst TIMER = 10;\n\n@customElement(\"crypto-pay\")\nexport class CryptoPay extends LitElement {\n  static styles = cryptoPayStyles;\n  @state() private step = 1;\n  @property({ type: String })\n  paymentToken = \"\";\n  @state() private selectedCrypto: any = {};\n  // @state() private amount = 10;\n  @property({ type: Number }) amount = 0;\n  @state() private qrInfo: any = {};\n  @state() enabled = true;\n  @query(\"dialog\") private dialog!: HTMLDialogElement;\n  @state() private isDialogOpen = false;\n  @state() private qrWalletAddress = \"\";\n  private transaction = new UseGetTransactionById(this);\n\n  private tokenList = new UseApi<any>(this, `/transaction/allowed-tokens/`, {\n    requestInit: {},\n    params: {\n      token: this.paymentToken,\n    },\n    enabled: !!this.paymentToken,\n    deps: [this.paymentToken],\n  });\n  private exchange = new UseExchangeRate(this, \"BTC\");\n  get equivalentCrypto() {\n    return Number((this.exchange.rate ?? 0) * (this.amount ?? 0))?.toFixed(4);\n  }\n  private expire = new UseExpire(this, {\n    expireTime: Date.now() + 1000 * 60 * TIMER, // 5 min\n    enabled: this.enabled,\n    onExpire: () => {\n      this.step = 1;\n      this.qrInfo = {};\n      this.qrWalletAddress = \"\";\n      this.selectedCrypto = {};\n      this.close();\n\n      console.log(\"Expired!\");\n    },\n  });\n\n  updated(changed: Map<string, unknown>) {\n    if (changed.has(\"selectedCrypto\")) {\n      this.exchange.currency = this.selectedCrypto?.token?.symbol;\n    }\n    if (changed.has(\"paymentToken\") && this.paymentToken && this.step == 1) {\n      this.tokenList = new UseApi<any>(this, `/transaction/allowed-tokens/`, {\n        params: {\n          token: this.paymentToken,\n        },\n        enabled: true,\n      });\n    }\n    if (changed.has(\"qrWalletAddress\")) {\n      this.transaction.setAddress(this.qrWalletAddress);\n    }\n  }\n\n  protected willUpdate(_changedProperties: PropertyValues): void {\n    if (_changedProperties.has(\"step\") && this.step == 2) {\n      this.qrInfo = new UseApi<any>(this, `/transaction/generateqr`, {\n        requestInit: {\n          method: \"POST\",\n          body: JSON.stringify({\n            amountInUsd: String(this.amount),\n            amountNative: this.equivalentCrypto,\n            paymentToken: this.paymentToken,\n            token_id: this.selectedCrypto?.token_id,\n          }),\n          headers: {\n            \"Content-Type\": \"application/json; charset=UTF-8\",\n          },\n        },\n        enabled: true,\n      });\n    }\n    if (\n      _changedProperties.has(\"isDialogOpen\") &&\n      this.step == 1 &&\n      this.isDialogOpen\n    ) {\n      this.expire.restart(Date.now() + 1000 * 60 * TIMER);\n    }\n  }\n\n  /* ======================\n     PUBLIC METHODS\n  ====================== */\n  open() {\n    this.step = 1;\n    this.dialog.showModal();\n    this.isDialogOpen = true;\n  }\n\n  close() {\n    this.dialog.close();\n    this.isDialogOpen = false;\n  }\n\n  /* ======================\n     STEP LOGIC\n  ====================== */\n\n  private goToPayment() {\n    if (!this.amount || this.amount <= 0) return;\n    this.step = 2;\n  }\n\n  private markSuccess() {\n    this.step = 3;\n\n    this.dispatchEvent(\n      new CustomEvent(\"payment-success\", {\n        detail: {\n          success: true,\n          trxnData: this.transaction?.data?.data,\n          crypto: this.selectedCrypto,\n          amount: this.amount,\n        },\n        bubbles: true,\n        composed: true,\n      }),\n    );\n  }\n\n  private markFailed() {\n    this.step = 4;\n    this.dispatchEvent(\n      new CustomEvent(\"payment-failed\", {\n        detail: {\n          success: false,\n          trxnData: this.transaction?.data?.data,\n          crypto: this.selectedCrypto,\n          amount: this.amount,\n        },\n        bubbles: true,\n        composed: true,\n      }),\n    );\n  }\n\n  private handleAmountChange(e: Event) {\n    const value = (e.target as HTMLInputElement).value;\n    const numeric = Number(value);\n    if (!isNaN(numeric)) {\n      this.amount = numeric;\n    }\n  }\n\n  /* ======================\n     STEP 1 (UPDATED UI)\n  ====================== */\n\n  private renderStep1() {\n    return html`\n      <div class=\"step1\">\n        <div class=\"left\">\n          <div class=\"amount-label\">Amount to be paid</div>\n\n          <div class=\"amount-row\">\n            <input\n              disabled\n              type=\"number\"\n              class=\"amount-input\"\n              .value=${String(this.amount)}\n              @input=${this.handleAmountChange}\n              min=\"0\"\n            />\n            <div class=\"currency\">USD</div>\n          </div>\n\n          <div class=\"crypto-list\">\n            ${this.tokenList.loading\n              ? html`<div>Loading tokens...</div>`\n              : this.tokenList?.data?.data?.map(\n                  (c: any) => html`\n                    <div\n                      class=\"crypto-item ${this.selectedCrypto?.token_id ===\n                      c?.token_id\n                        ? \"selected\"\n                        : \"\"}\"\n                      @click=${() => (this.selectedCrypto = c)}\n                    >\n                      <img src=${c?.token?.logo_url} class=\"crypto-logos\" />\n                      ${c?.token?.symbol}\n                    </div>\n                  `,\n                )}\n          </div>\n        </div>\n\n        <!-- RIGHT SIDE -->\n        <div class=\"right\">\n          <div class=\"preview-title\">Payment Preview</div>\n\n          <div class=\"preview-row\">\n            <span>Total</span>\n            <span>${this.amount} USD</span>\n          </div>\n\n          <div class=\"preview-row\">\n            <span>Crypto</span>\n            <span>\n              ${this.exchange.loading\n                ? html`Loading rate...`\n                : html`\n                    ${this.selectedCrypto?.token?.symbol\n                      ? this.equivalentCrypto\n                      : 0}\n                    ${this.selectedCrypto?.token?.symbol}\n                  `}\n            </span>\n          </div>\n\n          <div class=\"preview-amount\">\n            ${this.exchange.loading\n              ? html`Calculating...`\n              : html`\n                  ${this.selectedCrypto?.token?.symbol\n                    ? this.equivalentCrypto\n                    : 0}\n                  ${this.selectedCrypto?.token?.symbol}\n                `}\n          </div>\n\n          <button\n            class=\"continue-btn\"\n            ?disabled=${this.exchange.loading ||\n            this.tokenList.loading ||\n            !this.selectedCrypto?.token?.symbol ||\n            Number(this.equivalentCrypto) == 0}\n            @click=${this.goToPayment}\n          >\n            ${this.exchange.loading ? \"Loading...\" : \"Continue →\"}\n          </button>\n        </div>\n      </div>\n    `;\n  }\n\n  /* ======================\n     OTHER STEPS (UNCHANGED)\n  ====================== */\n\n  private renderStep2() {\n    this.qrWalletAddress = this.qrInfo?.data?.data?.payQr?.qr_address;\n    if (this.transaction?.data?.data?.tx_status == \"paid\") {\n      this.markSuccess();\n    }\n    if (this.qrInfo.loading) {\n      return html`\n        <div\n          class=\"payment-sdk-container\"\n          style=\"display:flex;justify-content:center;align-items:center;min-height:420px;flex-direction:column\"\n        >\n          <app-loader></app-loader>\n          <p>Getting Qr Data...</p>\n        </div>\n      `;\n    }\n    // console.log(this.qrInfo?.error?.message, \"asdasda\");\n\n    if (this.qrInfo?.isError) {\n      return html`\n        <div\n          class=\"payment-sdk-container\"\n          style=\"display:flex;justify-content:center;align-items:center;min-height:420px;flex-direction:column\"\n        >\n          <p class=\"error-text\">\n            ${this.qrInfo?.error?.message || \"Something went wrong.\"}\n          </p>\n        </div>\n      `;\n    }\n\n    return html`\n      <div class=\"payment-sdk-container\">\n        <h2 class=\"payment-title\">\n          Pay with ${this.selectedCrypto?.token?.symbol}\n        </h2>\n\n        <div class=\"amount-card\">\n          <div class=\"amount-row\">\n            <span>You Pay</span>\n            <strong>${this.amount} USD</strong>\n          </div>\n\n          <div class=\"amount-divider\">↓ Conversion ↓</div>\n\n          <div class=\"amount-row crypto\">\n            <span>Send</span>\n            <strong>\n              ${this.exchange.loading\n                ? \"Calculating...\"\n                : `${this.equivalentCrypto} ${this.selectedCrypto?.token?.symbol}`}\n            </strong>\n          </div>\n        </div>\n\n        <div class=\"qr-container\">\n          <img src=${this.qrInfo?.data?.data?.paymentQr} class=\"qr-image\" />\n        </div>\n\n        <div class=\"wallet-box\">\n          <div>\n            <div class=\"wallet-label\">Wallet Address</div>\n            <div class=\"wallet-address\">\n              ${this.qrInfo?.data?.data?.payQr?.qr_address}\n            </div>\n          </div>\n          <div>\n            ${this.transaction?.loading &&\n            html`<wifi-loader .text=${\"\"}></wifi-loader>`}\n          </div>\n        </div>\n\n        <!-- <div class=\"actions\">\n          <button class=\"secondary\" @click=${this.markFailed}>Reject</button>\n          <button class=\"primary\" @click=${this.markSuccess}>I've Paid</button>\n        </div> -->\n      </div>\n    `;\n  }\n  private renderStep3() {\n    return html`\n      <div class=\"result-container\">\n        <div class=\"result-card success-card\">\n          <div class=\"result-icon\">✓</div>\n\n          <div class=\"result-title\">Payment Successful</div>\n\n          <div class=\"result-subtitle\">\n            Your transaction has been completed successfully.\n          </div>\n\n          <div class=\"result-summary\">\n            <div class=\"summary-row\">\n              <span>Paid</span>\n              <strong>${this.amount} USD</strong>\n            </div>\n\n            <div class=\"summary-row highlight\">\n              <span>Crypto Sent</span>\n              <strong>\n                ${this.equivalentCrypto} ${this.selectedCrypto?.token?.symbol}\n              </strong>\n            </div>\n          </div>\n\n          <button class=\"primary result-btn\" @click=${this.close}>Close</button>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderStep4() {\n    return html`\n      <div class=\"result-container\">\n        <div class=\"result-card failed-card\">\n          <div class=\"result-icon failed-icon\">✕</div>\n\n          <div class=\"result-title failed-title\">Payment Rejected</div>\n\n          <div class=\"result-subtitle\">\n            The transaction was not completed. Please try again.\n          </div>\n\n          <div class=\"result-summary\">\n            <div class=\"summary-row\">\n              <span>Attempted</span>\n              <strong>${this.amount} USD</strong>\n            </div>\n\n            <div class=\"summary-row highlight-failed\">\n              <span>Crypto</span>\n              <strong>\n                ${this.equivalentCrypto} ${this.selectedCrypto?.token?.symbol}\n              </strong>\n            </div>\n          </div>\n\n          <button class=\"primary result-btn failed-btn\" @click=${this.close}>\n            Close\n          </button>\n        </div>\n      </div>\n    `;\n  }\n\n  render() {\n    return html`\n      <dialog @cancel=${this.close}>\n        ${this.step === 1\n          ? this.renderStep1()\n          : this.step === 2\n            ? this.renderStep2()\n            : this.step === 3\n              ? this.renderStep3()\n              : this.renderStep4()}\n        <close-button @click=${this.close}></close-button>\n        ${this.step < 3\n          ? html`<div class=\"timeRemainContainer\">\n              <p>Time Left:</p>\n              <p>\n                ${this.expire.hours}h : ${this.expire.minutes}m :\n                ${this.expire.seconds}s\n              </p>\n            </div>`\n          : html``}\n      </dialog>\n    `;\n  }\n}\n"]}